# 飞书机器人热门菜品查询 - Top N P 格式指南

## 🆕 新格式（推荐）

### 命令格式
```
Top N [P] [店铺] [平台] [类型]
```

### 参数说明

| 参数 | 说明 | 必填 | 默认值 | 示例 |
|-----|-----|-----|-------|------|
| **N** | 显示前N名 | ✅ 是 | - | 5, 10, 20 |
| **P** | 前P天数据 | ❌ 否 | 所有时间 | 7, 14, 30 |
| **店铺** | 店铺名称 | ❌ 否 | 全部店铺 | Battersea, piccadilly |
| **平台** | 平台筛选 | ❌ 否 | 全部平台 | deliveroo, panda |
| **类型** | 查询类型 | ❌ 否 | summary（汇总） | main, modifier, summary |

### 参数详解

#### N - 显示数量（必填）
- 范围：1-50
- 建议：汇总模式用 5-10，详细模式用 10-20
- 示例：`Top 5`, `Top 10`, `Top 20`

#### P - 时间范围（可选）
- 单位：天
- 含义：查询最近P天的数据
- 示例：
  - `7` - 最近7天
  - `14` - 最近2周
  - `30` - 最近1个月
  - 不填 - 所有时间

#### 店铺（可选）
- 支持：英文/中文店铺名
- 格式：大小写不敏感
- 支持店铺：
  - `Battersea` / `battersea` / `巴特西`
  - `Piccadilly` / `piccadilly` / `皮卡迪利`
  - `East` / `east` / `东店`
  - `Brent` / `brent` / `布伦特`
  - `Towerbridge` / `towerbridge` / `塔桥`

#### 平台（可选）
- **Deliveroo**: `deliveroo`, `roo`, `袋鼠`, `🦘`
- **HungryPanda**: `panda`, `hungrypanda`, `熊猫`, `🐼`
- 不填：查询所有平台

#### 类型（可选）
- **main** / **主产品** - 仅显示主菜品详细榜单
- **modifier** / **添加项** - 仅显示配料详细榜单
- **summary** / **汇总** - 显示主产品+添加项 TOP N（默认）

## 📝 使用示例

### 基础查询
```
Top 5
```
- ✅ 显示前5名
- ✅ 所有时间
- ✅ 所有店铺
- ✅ 所有平台
- ✅ 汇总模式（主产品+添加项各显示5名）

---

### 时间范围查询
```
Top 10 7
```
- ✅ 显示前10名
- ✅ 最近7天的数据
- ✅ 所有店铺和平台
- ✅ 汇总模式

```
Top 5 30
```
- ✅ 显示前5名
- ✅ 最近30天的数据

---

### 店铺筛选
```
Top 5 7 Battersea
```
- ✅ 巴特西店
- ✅ 最近7天
- ✅ 显示前5名

```
Top 10 14 piccadilly
```
- ✅ Piccadilly店
- ✅ 最近14天
- ✅ 显示前10名

---

### 平台筛选
```
Top 5 10 Battersea deliveroo
```
- ✅ 巴特西店
- ✅ 最近10天
- ✅ 仅 Deliveroo 平台
- ✅ 显示前5名

```
Top 8 7 piccadilly panda
```
- ✅ Piccadilly店
- ✅ 最近7天
- ✅ 仅 HungryPanda 平台
- ✅ 显示前8名

---

### 类型筛选
```
Top 5 10 Battersea deliveroo main
```
- ✅ 巴特西店
- ✅ 最近10天
- ✅ Deliveroo 平台
- ✅ **仅主产品**，显示前5名

```
Top 8 14 piccadilly panda modifier
```
- ✅ Piccadilly店
- ✅ 最近14天
- ✅ HungryPanda 平台
- ✅ **仅添加项**，显示前8名

```
Top 10 7 east deliveroo summary
```
- ✅ East店
- ✅ 最近7天
- ✅ Deliveroo 平台
- ✅ **汇总模式**（主产品+添加项各10名）

---

### 完整参数组合
```
Top 3 30 Battersea deliveroo modifier
```
**意思：** 巴特西店，最近30天，Deliveroo平台，添加项，显示前3名

```
Top 7 14 piccadilly panda main
```
**意思：** Piccadilly店，最近14天，HungryPanda平台，主产品，显示前7名

---

## 🔄 旧格式（仍然支持）

### 基础查询
- `热门菜品` - 汇总（主产品+添加项 TOP 5）
- `热门主产品` - 主产品 TOP 10
- `热门添加项` - 添加项 TOP 10

### 带店铺查询
- `Piccadilly店 热门菜品`
- `battersea 热门主产品`

### 带日期查询
- `2025-12-24 热门菜品`
- `Piccadilly店 2025-12-24 热门添加项`

### 带平台查询
- `热门菜品 deliveroo`
- `热门主产品 panda`

---

## 💡 最佳实践

### 推荐用法
1. **快速查看** - `Top 5` 或 `Top 10`
2. **分析最近趋势** - `Top 10 7`（最近一周）
3. **单店分析** - `Top 5 7 Battersea deliveroo main`
4. **跨店对比** - 分别查询不同店铺

### 参数选择建议
- **N（显示数量）**
  - 汇总模式：5-10（避免太长）
  - 详细模式：10-20
  
- **P（时间范围）**
  - 日常分析：7天
  - 周期分析：14天
  - 月度分析：30天
  - 不填：查看历史所有数据

- **店铺**
  - 单店深度分析：指定店铺
  - 整体表现：不填（全部店铺）

- **平台**
  - 平台对比：分别查询
  - 整体表现：不填（全部平台）

- **类型**
  - 快速概览：summary（默认）
  - 详细分析：main 或 modifier

---

## 📊 响应格式

### 汇总模式（summary）
```
🔥 热门菜品汇总
📍 店铺: Battersea
📅 时间: 最近7天 (2025-12-25 至 2026-01-01)

🍜 热门主产品 TOP 5:
🥇 Create Your Own Mini Pot: 54份 | £1598.10 | 26单
🥈 Mini HotPot For Two people: 32份 | £1188.94 | 16单
...

🎯 热门添加项 TOP 5:
🥇 米饭 Rice: 82次 | 31单
🥈 米饭 Rice: 66次 | 32单
...
```

### 详细模式（main/modifier）
```
🍜 热门主产品 TOP 10 (DELIVEROO)
📍 店铺: Battersea
📅 时间: 最近7天 (2025-12-25 至 2026-01-01)

🥇 Two people Mini Pot
   📦 销量: 26份 | 💰 营收: £944.78
   📝 订单: 13单 | 💵 均价: £30.99
...
```

---

## ❓ 常见问题

### Q: 如何查看某店铺最近一周的畅销菜品？
**A:** `Top 10 7 店铺名`
- 例如：`Top 10 7 Battersea`

### Q: 如何对比不同平台的热门菜品？
**A:** 分别查询：
- `Top 10 7 Battersea deliveroo`
- `Top 10 7 Battersea panda`

### Q: 如何查看历史所有时间的数据？
**A:** 不填时间参数：
- `Top 10` - 所有时间
- `Top 10 Battersea` - 某店铺所有时间

### Q: 参数顺序可以调整吗？
**A:** ❌ 不可以，必须按照 `Top N [P] [店铺] [平台] [类型]` 的顺序

### Q: 旧格式还能用吗？
**A:** ✅ 可以！旧格式（如"热门菜品"）仍然支持，但推荐使用新格式

---

## 🎯 快速参考卡

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           TOP N P 格式快速参考
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

格式: Top N [P] [店铺] [平台] [类型]

N     = 显示数量 (1-50)          ✅ 必填
P     = 前P天数据                ❌ 可选
店铺  = Battersea/piccadilly...  ❌ 可选
平台  = deliveroo/panda          ❌ 可选
类型  = main/modifier/summary    ❌ 可选

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           常用命令示例
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Top 5                 - 快速查看 TOP 5
Top 10 7              - 最近一周 TOP 10
Top 5 30 Battersea    - 巴特西月度 TOP 5
Top 5 10 Battersea deliveroo main
                      - 完整参数查询
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```
